"use strict";(self["webpackChunkwebpack_vue"]=self["webpackChunkwebpack_vue"]||[]).push([[828],{5828:function(e,s,t){t.r(s),t.d(s,{default:function(){return m}});var r=function(){var e=this,s=e._self._c;return s("el-form",{ref:"form",staticClass:"login-container",attrs:{model:e.form,"states-icon":"",rules:e.rules,"label-width":"100px"},nativeOn:{submit:function(e){e.preventDefault()}}},[s("h3",{staticClass:"login-title"},[e._v("系统登录")]),s("el-form-item",{staticClass:"username",attrs:{label:"用户名","label-width":"80px",prop:"username"}},[s("el-input",{attrs:{type:"input","aria-autocomplete":"off","aria-placeholder":"请输入账号"},model:{value:e.form.username,callback:function(s){e.$set(e.form,"username",s)},expression:"form.username"}})],1),s("el-form-item",{staticClass:"password",attrs:{label:"密码","label-width":"80px",prop:"password"}},[s("el-input",{attrs:{type:"password","aria-autocomplete":"off","aria-placeholder":"请输入密码"},nativeOn:{keyup:function(s){return!s.type.indexOf("key")&&e._k(s.keyCode,"enter",13,s.key,"Enter")?null:e.login.apply(null,arguments)}},model:{value:e.form.password,callback:function(s){e.$set(e.form,"password",s)},expression:"form.password"}})],1),s("el-form-item",{staticClass:"login_submit"},[s("el-button",{staticClass:"login_submit",attrs:{type:"primary"},on:{click:e.login}},[e._v("登录")])],1)],1)},a=[],n=(t(7658),t(1703)),o={name:"login",data(){return{form:{},rules:{username:[{required:!0,message:"请输入用户名",trigger:"blur"},{min:1,message:"用户名不能小于1位",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"},{min:1,message:"用户名不能小于1位",trigger:"blur"}]}}},methods:{login(){this.$refs.form.validate((e=>{e&&(0,n.m3)(this.form).then((({data:e})=>{console.log(e),307===e.code&&this.handleOpenCode(),200===e.code?(localStorage.setItem("token",e.data.token),this.$message.success("Login success!"),this.$router.push("/home")):302===e.code?this.open():this.$message.error(e.msg)}))}))},handleOpenCode(){this.$prompt("请输入口令","提示",{confirmButtonText:"确定",cancelButtonText:"取消",inputPattern:/^\d{6}$/,inputErrorMessage:"Code Error!"}).then((({value:e})=>{this.form.code=e,(0,n.m3)(this.form).then((({data:e})=>{200===e.code?(localStorage.setItem("token",e.data.token),this.$message.success("Login success!"),this.$router.push("/home")):this.$message.error(e.msg)}))})).catch((()=>{this.$message.info("Cancel login!")}))}}},u=o,i=t(1001),l=(0,i.Z)(u,r,a,!1,null,"05005d5c",null),m=l.exports},7141:function(e,s,t){t.d(s,{Z:function(){return h}});var r=t(7934),a=t.n(r),n=t(4002),o=t.n(n),u=(t(7658),t(70)),i={baseUrl:{dev:"/api/",pro:""}},l=t(4655);let m,c=0;function p(){0==c&&(m=o().service({lock:!0,text:"拼命加载中...",background:"rgba(255,255,255,0.5)"})),c++}function d(){c--,c<=0&&m.close()}const g=i.baseUrl.pro;class f{constructor(e){this.baseUrl=e}getInsideConfig(){this.baseUrl}interceptors(e){e.interceptors.request.use((function(e){p();const s=localStorage.getItem("token");return s&&(e.headers["X-Token"]=s),e}),(function(e){return Promise.reject(e)})),e.interceptors.response.use((function(e){return d(),e}),(function(e){if(d(),e&&e.response)switch(e.response.status){case 400:e.message="请求错误(400),请刷新重试~~~"+e.response.data.msg;break;case 401:localStorage.removeItem("token"),l.Z.push("/login");break;case 403:e.message="拒绝访问(403) "+e.response.data.msg;break;case 404:e.message="请求出错(404) "+e.response.data.msg;break;case 408:e.message="请求超时(408) "+e.response.data.msg;break;case 500:e.message="服务器错误(500) "+e.response.data.msg;break;case 501:e.message="服务未实现(501) "+e.response.data.msg;break;case 502:e.message="网络错误(502) "+e.response.data.msg;break;case 503:e.message="服务不可用(503) "+e.response.data.msg;break;case 504:e.message="网络超时(504) "+e.response.data.msg;break;case 505:e.message="HTTP版本不受支持(505) "+e.response.data.msg;break;default:e.message=`连接出错(${e.response.status})!`}else e.message="连接服务器失败!";return a().error(e.message),Promise.reject(e)}))}request(e){const s=u.Z.create();return e={...this.getInsideConfig(),...e},this.interceptors(s),s(e)}}var h=new f(g)},1703:function(e,s,t){t.d(s,{JH:function(){return p},Nx:function(){return c},RD:function(){return n},TM:function(){return i},Th:function(){return o},Zi:function(){return u},bv:function(){return g},fE:function(){return d},m3:function(){return a},qm:function(){return l},v$:function(){return m}});var r=t(7141);const a=e=>r.Z.request({url:"/api/v1/auth/login",method:"post",data:e}),n=e=>r.Z.request({url:"/api/v1/auth/logout",method:"delete",data:e}),o=e=>r.Z.request({url:"/api/v1/manage",method:"get",params:e}),u=e=>r.Z.request({url:"/api/v1/manage",method:"post",data:e}),i=e=>r.Z.request({url:"/api/v1/manage/"+e.id,method:"put",data:e}),l=e=>r.Z.request({url:"/api/v1/manage/"+e.id,method:"delete"}),m=e=>r.Z.request({url:"/api/v1/manage/cache",method:"post",data:e}),c=e=>r.Z.request({url:"/api/v1/manage/cache",method:"delete",params:e}),p=e=>r.Z.request({url:"/api/v1/manage/deploy/"+e.id,method:"post"}),d=e=>r.Z.request({url:"/api/v1/manage/ssl/"+e.id,method:"post"}),g=e=>r.Z.request({url:"/api/v1/manage/ssl/",method:"get",params:e})}}]);
//# sourceMappingURL=828.3948c910.js.map