"use strict";(self["webpackChunkwebpack_vue"]=self["webpackChunkwebpack_vue"]||[]).push([[406],{8406:function(e,s,t){t.r(s),t.d(s,{default:function(){return m}});var a=function(){var e=this,s=e._self._c;return s("el-card",{staticClass:"box-card",staticStyle:{width:"100%"},attrs:{shadow:"hover"}},[s("el-dialog",{attrs:{title:"修改账户密码",visible:e.dialogVisible,width:"30%","before-close":e.handleClose,center:""},on:{"update:visible":function(s){e.dialogVisible=s}}},[s("el-form",{ref:"form",staticClass:"demo-dynamic",attrs:{model:e.form,"label-width":"80px"}},[s("el-form-item",{attrs:{prop:"username",label:"用户名:",rules:[{required:!0,message:"请输入自定义的用户",trigger:"blur"}]}},[s("el-input",{attrs:{placeholder:"请输入自定义的用户，下次登录使用新的用户名"},model:{value:e.form.username,callback:function(s){e.$set(e.form,"username",s)},expression:"form.username"}})],1),s("el-form-item",{attrs:{prop:"password",label:"密码:",rules:[{required:!0,message:"请输入自定义的密码",trigger:"blur"}]}},[s("el-input",{attrs:{type:"password",placeholder:"请输入自定义的密码，下次登录使用新的密码"},model:{value:e.form.password,callback:function(s){e.$set(e.form,"password",s)},expression:"form.password"}})],1)],1),s("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[s("el-button",{on:{click:e.cancel}},[e._v("取 消")]),s("el-button",{attrs:{type:"primary"},on:{click:e.submit}},[e._v("确 定")])],1)],1),s("el-table",{staticStyle:{width:"100%"},attrs:{data:e.userData,"max-height":"630",border:"","header-cell-style":{background:"#fff"}}},[s("el-table-column",{attrs:{prop:"id",label:"ID"}}),s("el-table-column",{attrs:{prop:"username",label:"用户"}}),s("el-table-column",{attrs:{prop:"created_at",label:"创建时间"}}),s("el-table-column",{attrs:{prop:"updated_at",label:"更新时间"}}),s("el-table-column",{attrs:{label:"操作",width:"180",fixed:"right"},scopedSlots:e._u([{key:"default",fn:function(t){return[s("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"修改账户密码",placement:"top-start"}},[s("el-button",{attrs:{size:"mini",type:"success",icon:"el-icon-edit-outline",circle:""},on:{click:function(s){return e.updateUser(t.$index,t.row)}}})],1)]}}])})],1)],1)},r=[],o=t(7141);const l=e=>o.Z.request({url:"/api/v1/users",method:"get",params:e}),i=(e,s)=>(delete s.id,o.Z.request({url:"/api/v1/users/"+e,method:"put",data:s}));var n={name:"user",data(){return{dialogVisible:!1,userData:[],form:{username:"",password:""}}},methods:{getUsersList(){l().then((e=>{200===e.data.code&&(this.userData=e.data.data.data)}))},updateUser(e,s){this.dialogVisible=!0,this.form=JSON.parse(JSON.stringify(s))},delUser(){},handleClose(e){this.dialogVisible=!1,this.$refs.form.resetFields()},cancel(){this.handleClose()},submit(){this.$refs.form.validate((e=>{e&&(delete this.form.created_at,delete this.form.updated_at,i(this.form.id,this.form).then((e=>{200===e.data.code?(this.$message.success("Update user success!"),this.handleClose(),this.getUsersList()):(this.$message.error(e.data.msg),this.handleClose())})))}))}},created(){this.getUsersList()}},c=n,d=t(1001),u=(0,d.Z)(c,a,r,!1,null,null,null),m=u.exports},7141:function(e,s,t){t.d(s,{Z:function(){return b}});var a=t(7934),r=t.n(a),o=t(4002),l=t.n(o),i=(t(7658),t(70)),n={baseUrl:{dev:"/api/",pro:""}},c=t(4655);let d,u=0;function m(){0==u&&(d=l().service({lock:!0,text:"拼命加载中...",background:"rgba(255,255,255,0.5)"})),u++}function p(){u--,u<=0&&d.close()}const f=n.baseUrl.pro;class g{constructor(e){this.baseUrl=e}getInsideConfig(){this.baseUrl}interceptors(e){e.interceptors.request.use((function(e){m();const s=localStorage.getItem("token");return s&&(e.headers["X-Token"]=s),e}),(function(e){return Promise.reject(e)})),e.interceptors.response.use((function(e){return p(),e}),(function(e){if(p(),e&&e.response)switch(e.response.status){case 400:e.message="请求错误(400),请刷新重试~~~"+e.response.data.msg;break;case 401:localStorage.removeItem("token"),c.Z.push("/login");break;case 403:e.message="拒绝访问(403) "+e.response.data.msg;break;case 404:e.message="请求出错(404) "+e.response.data.msg;break;case 408:e.message="请求超时(408) "+e.response.data.msg;break;case 500:e.message="服务器错误(500) "+e.response.data.msg;break;case 501:e.message="服务未实现(501) "+e.response.data.msg;break;case 502:e.message="网络错误(502) "+e.response.data.msg;break;case 503:e.message="服务不可用(503) "+e.response.data.msg;break;case 504:e.message="网络超时(504) "+e.response.data.msg;break;case 505:e.message="HTTP版本不受支持(505) "+e.response.data.msg;break;default:e.message=`连接出错(${e.response.status})!`}else e.message="连接服务器失败!";return r().error(e.message),Promise.reject(e)}))}request(e){const s=i.Z.create();return e={...this.getInsideConfig(),...e},this.interceptors(s),s(e)}}var b=new g(f)}}]);
//# sourceMappingURL=406.0c697720.js.map